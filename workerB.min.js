if(typeof document!=="undefined"){function VWorker(e){this.worker=new Worker("workerB.js#newWorker");this.func=false;this._cb={};this.callFunction=function(e,t){var n=t.length;var r=[];while(n--)r.push(t[n]);this.worker.postMessage(e);this.worker.postMessage(r)};this.method=function(e,t,n){this.callFunction("method",[e,t.toString()]);this[e]=function(){this.callFunction(e,arguments)}.bind(this);this._cb[e]=n?n:false}.bind(this);this.worker.addEventListener("message",function(e){if(!this.func)this.func=e.data;else{if(this._cb[this.func])this._cb[this.func](e.data);this.func=false}}.bind(this));if(e){this.method("init",e);var t=arguments.length===1?[arguments[0]]:Array.apply(null,arguments).sort();t.pop();this.init.apply(this,t)}}}else{VWorker=function(){this.func=false;this.method=function(strfunc,name){var func=eval("("+strfunc+")");this[name]=function(){var e=func.apply(this,arguments);self.postMessage(name);self.postMessage(e);this.func=false}}};worker=new VWorker;self.addEventListener("message",function(e){if(worker.func===false){worker.func=e.data;if(!worker[worker.func])console.log("ERROR! FUNCTION NOT DEFINED!")}else{var t=worker.func;worker.func=false;var n=[];for(var r in e.data){n.push(e.data[r])}worker[t].apply(worker,n)}})}